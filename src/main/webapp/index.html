<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <title>Xebay</title>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-header">
      <span class="navbar-brand">Xebay</span>
    </div>
    <div class="navbar-collapse collapse">
      <form id="register" class="navbar-form navbar-right unregistered">
        <div class="form-group">
          <input id="email" type="text" placeholder="Email" class="form-control">
        </div>
        <div class="form-group">
          <input id="key" type="password" placeholder="API key" class="form-control">
        </div>
        <button type="button" class="btn btn-success" onclick="xebay.signin()">Sign in</button>
        <button type="button" class="btn btn-primary" onclick="xebay.signup()">Sign up</button>
      </form>
      <div id="unregister" class="registered">
        <form class="navbar-form navbar-right">
          <button id="signout" type="button" class="btn btn-warning" onclick="xebay.signout()">Sign out</button>
        </form>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">My infos <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="my-infos">email: <span id="email-display"></span></li>
              <li class="my-infos">API key: <span id="key-display"></span></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
</div>

<div class="jumbotron">
  <div class="container">
    <p>
      A bid server to enjoy coding HTTP bid clients
    </p>
  </div>
</div>

<div class="container">
  <div class="row">

    <div class="col-md-4">
      <h2>API</h2>
      <p>There will be an API soon.</p>
    </div>

    <div class="col-md-4">
      <h2>Current bid offer</h2>
      <div id="current-bid-offer"></div>
    </div>

    <div class="col-md-4">
      <h2>Interact</h2>
      <div class="unregistered">
        <p>Please sign in to start bidding !</p>
      </div>
      <div class="registered">
        <span class="row disconnected">
          <button class="btn btn-success col-md-4 col-md-offset-8 disconnected" onclick="xebay.connect()">
            Connect <span class="glyphicon glyphicon-transfer"></span>
          </button>
        </span>
        <span class="row connected">
          <button class="btn btn-success btn-lg col-md-3" onclick="xebay.sendBidCall(1)">+1</button>
          <button class="btn btn-info btn-lg col-md-3 col-md-offset-1" onclick="xebay.sendBidCall(5)">+5</button>
          <button class="btn btn-warning btn-sm col-md-2 col-md-offset-1" onclick="xebay.sendBidCall(10)">+10</button>
          <button class="btn btn-danger btn-xs col-md-1 col-md-offset-1" onclick="xebay.sendBidCall(50)">+50</button>
        </span>
        <span class="row connected">
          <button class="btn col-md-7" onclick="xebay.clearLogs()">
            Clear <span class="glyphicon glyphicon-trash"></span>
          </button>
          <button class="btn btn-danger col-md-4 col-md-offset-1" onclick="xebay.disconnect()">
            Disconnect <span class="glyphicon glyphicon-flash"></span>
          </button>
        </span>
        <span id="bidAnswerLog" class="row connected"></span>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
<script type="text/javascript" src="js/jquery.cookie-1.4.0.js"></script>
<script type="text/javascript" src="js/bootstrap-3.0.3.min.js"></script>
<script type="text/javascript" src="js/handlebars-v1.3.0.js"></script>
<script id="currentBidOfferTemplate" type="text/template">
  {{#if itemName}}
  <p>{{itemName}}</p>
  <p>current value: {{currentValue}} bid points</p>
  {{else}}
  <p>There is no bid offer.</p>
  {{/if}}
</script>
<script id="bidAnswerAcceptedTemplate" type="text/template">
  <p class="alert alert-info col-md-12">Bid on {{name}} value is currently at {{value}} bid points.</p>
</script>
<script id="bidAnswerRejectedTemplate" type="text/template">
  <p class="alert alert-danger col-md-12">Bid on {{name}} with an increment of {{increment}} rejected with following cause : {{cause}}.</p>
</script>
<script type="text/javascript" src="js/xebay.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
      xebay.currentBidOfferTemplate = Handlebars.compile($("#currentBidOfferTemplate").html());
      xebay.bidAnswerTemplate = [];
      xebay.bidAnswerTemplate["ACCEPTED"] = Handlebars.compile($("#bidAnswerAcceptedTemplate").html());
      xebay.bidAnswerTemplate["REJECTED"] = Handlebars.compile($("#bidAnswerRejectedTemplate").html());
      xebay.init();
  });
</script>
</body>
</html>